<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark" />
  <title>Maneit Portal — NovelCrafter</title>

  <!-- New future-proof stack (only this page uses it for now) -->
  <link rel="stylesheet" href="../assets/css/core.css" />
  <link rel="stylesheet" href="../assets/css/theme.css" />
  <link rel="stylesheet" href="../assets/css/pages/novelcrafter.css" />
</head>

<body>
  <div class="gridbg" aria-hidden="true"></div>

  <header class="topbar">
    <div class="wrap row">
      <a class="brand" href="../index.html">
        <span class="dot"></span>
        <strong>Maneit Portal</strong>
        <span class="pill">NovelCrafter</span>
      </a>

      <nav class="tabsTop" aria-label="Portal navigation">
        <a class="tab" href="hub.html">Hub</a>
        <a class="tab" href="work.html">Work</a>
        <a class="tab" href="projects.html">Projects</a>
        <a class="tab" href="agents.html">Agents</a>
        <a class="tab" href="agentfactory.html">AgentFactory</a>
        <a class="tab" href="pipelines.html">Pipelines</a>
        <a class="tab" href="novelcrafter.html" data-active="true">NovelCrafter</a>
        <a class="tab" href="stream.html">Stream</a>
        <a class="tab" href="notes.html">Notes</a>
        <a class="tab" href="system.html">System</a>
      </nav>
    </div>
  </header>

  <main class="layout" id="novelcrafterRoot">
    <!-- LIBRARY -->
    <section class="panel" id="pLibrary">
      <div class="panelHead">
        <div class="panelTitle">Library</div>
        <div class="cornerBtns">
          <button class="iconbtn" id="libAddBtn" title="Add node (UI-only)">＋</button>
          <button class="iconbtn" title="No-op">×</button>
        </div>
      </div>

      <div class="moduleTabs" id="moduleTabs">
        <div class="mtab active" data-mod="world">World</div>
        <div class="mtab" data-mod="characters">Characters</div>
        <div class="mtab" data-mod="lore">Lore</div>
        <div class="mtab" data-mod="plot">Plot</div>
        <div class="mtab" data-mod="scenes">Scenes</div>
        <div class="mtab" data-mod="assets">Assets</div>
        <div class="mtab" data-mod="prompts">Prompts</div>
      </div>

      <div class="panelBody">
        <div class="mono muted">Project</div>
        <select class="field" id="projectSelect" style="margin-top:8px;">
          <option value="gylfagard">Guldardal Chronicles</option>
          <option value="iskald">ISKALD (placeholder)</option>
        </select>

        <div class="mono muted" style="margin-top:12px;">Search</div>
        <input class="field" id="libSearch" placeholder="Search nodes…" style="margin-top:8px;" />

        <div class="mono muted" style="margin-top:12px;">Nodes</div>
        <div class="libScroll mono" id="libList" style="margin-top:8px;"></div>

        <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:12px;">
          <button class="btn" id="libDupBtn">Duplicate</button>
          <button class="btn" id="libDelBtn">Delete</button>
        </div>
      </div>

      <div class="panelFoot">panel</div>
    </section>

    <!-- CHATMODEL -->
    <section class="panel" id="pChat">
      <div class="panelHead">
        <div class="panelTitle">Chatmodel</div>
        <div class="cornerBtns">
          <button class="iconbtn" id="chatNewBtn" title="New chat">＋</button>
          <button class="iconbtn" title="No-op">×</button>
        </div>
      </div>

      <div class="chatTop mono">
        <div class="muted" id="chatProjectLabel">Project: —</div>
        <div class="muted" id="chatModuleLabel">Module: —</div>
      </div>

      <div class="chatGrid">
        <div class="chatList">
          <div class="chatListInner" id="chatList"></div>
          <div style="padding:10px;">
            <button class="btn" style="width:100%;" id="chatNewBtn2">+ New chat</button>
          </div>
        </div>

        <div class="chatMain">
          <div class="chatMsgs mono" id="chatMsgs"></div>

          <div class="chatInput">
            <select class="field" id="modelSelect">
              <option>Local LLM</option>
              <option>Reasoning model</option>
              <option>Fast draft</option>
            </select>

            <textarea class="field chatTA" id="chatInput" placeholder="Enter = send, Shift+Enter = newline"></textarea>

            <button class="btn" id="sendBtn">Send</button>
          </div>
        </div>
      </div>

      <div class="panelFoot">panel</div>
    </section>

    <!-- STORYLINE -->
    <section class="panel" id="pStoryline">
      <div class="panelHead">
        <div class="panelTitle">Storyline</div>
        <div class="cornerBtns">
          <button class="iconbtn" id="beatAddQuick" title="Focus add">＋</button>
          <button class="iconbtn" title="No-op">×</button>
        </div>
      </div>

      <div class="storyBody mono">
        <div style="display:flex; gap:8px; flex-wrap:wrap; align-items:center;">
          <span class="flag">Canon lock: <strong id="canonState">ON</strong></span>
          <span class="flag">Book: <strong id="bookNo">1</strong></span>
        </div>

        <div class="beats" id="beats"></div>

        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <input class="field" id="beatInput" placeholder="Add beat…" style="flex:1; min-width: 180px;" />
          <button class="btn" id="beatAddBtn">Add</button>
        </div>

        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <button class="btn" id="beatEditBtn">Edit</button>
          <button class="btn" id="beatDelBtn">Delete</button>
          <button class="btn" id="beatUpBtn">Up</button>
          <button class="btn" id="beatDownBtn">Down</button>
        </div>

        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <button class="btn" id="toggleCanonBtn">Toggle lock</button>
          <button class="btn" id="bookPlusBtn">Book +1</button>
          <button class="btn" id="runLaterBtn">Run (later)</button>
        </div>
      </div>

      <div class="panelFoot">panel</div>
    </section>

    <!-- WORLD -->
    <section class="panel" id="pWorld">
      <div class="panelHead">
        <div class="panelTitle">World</div>
        <div class="cornerBtns">
          <button class="iconbtn" id="worldOpenBtn" title="Select World module">↗</button>
          <button class="iconbtn" title="No-op">×</button>
        </div>
      </div>
      <div class="miniBody mono">
        <div style="display:flex; gap:8px; flex-wrap:wrap;">
          <span class="chip">Project-bound</span>
          <span class="chip" id="worldCountChip">Nodes: 0</span>
        </div>
        <div class="miniGrid" id="worldMiniList"></div>
        <div class="muted">Secondary panel.</div>
      </div>
      <div class="panelFoot">panel</div>
    </section>

    <!-- CHAPTERS -->
    <section class="panel" id="pChapters">
      <div class="panelHead">
        <div class="panelTitle">chapters</div>
        <div class="cornerBtns">
          <button class="iconbtn" id="chapOpenBtn" title="Select Scenes module">↗</button>
          <button class="iconbtn" title="No-op">×</button>
        </div>
      </div>
      <div class="miniBody mono">
        <div style="display:flex; gap:8px; flex-wrap:wrap;">
          <span class="chip">Draft pool</span>
          <span class="chip">Forks OK</span>
        </div>
        <div class="miniGrid" id="chapMiniList"></div>
        <div class="muted">Secondary panel.</div>
      </div>
      <div class="panelFoot">panel</div>
    </section>

    <!-- CHARACTERS -->
    <section class="panel" id="pCharacters">
      <div class="panelHead">
        <div class="panelTitle">Characters.</div>
        <div class="cornerBtns">
          <button class="iconbtn" id="charOpenBtn" title="Select Characters module">↗</button>
          <button class="iconbtn" title="No-op">×</button>
        </div>
      </div>
      <div class="miniBody mono">
        <div style="display:flex; gap:8px; flex-wrap:wrap;">
          <span class="chip">Project-bound</span>
          <span class="chip" id="charCountChip">Nodes: 0</span>
        </div>
        <div class="miniGrid" id="charMiniList"></div>
        <div class="muted">Secondary panel.</div>
      </div>
      <div class="panelFoot">panel</div>
    </section>

    <!-- PIPELINE -->
    <section class="panel" id="pPipeline">
      <div class="panelHead">
        <div class="panelTitle">Novelcrafter Pipeline</div>
        <div class="cornerBtns">
          <button class="iconbtn" title="No-op">⧉</button>
          <button class="iconbtn" title="No-op">×</button>
        </div>
      </div>
      <div class="pipeBody mono">
        <div class="muted">Set once. Rarely touched. (UI-only)</div>
        <div class="pipeRow">
          <span class="chip">1) Retrieve canon</span>
          <span class="chip">2) Generate</span>
          <span class="chip">3) Continuity checks</span>
          <span class="chip">4) Update state</span>
          <span class="chip">5) Store nodes</span>
        </div>
        <div class="pipeRow">
          <button class="btn">Configure (later)</button>
          <button class="btn">Run pipeline (later)</button>
          <button class="btn">Export (later)</button>
        </div>
        <div class="muted">This exists so you don't have to babysit the workflow.</div>
      </div>
      <div class="panelFoot">panel</div>
    </section>

    <!-- CONTEXT -->
    <section class="panel" id="pContext">
      <div class="panelHead">
        <div class="panelTitle">context</div>
        <div class="cornerBtns">
          <button class="iconbtn" title="No-op">⧉</button>
          <button class="iconbtn" title="No-op">×</button>
        </div>
      </div>
      <div class="panelBody mono">
        <div class="muted">Selected node</div>
        <div class="contextBox" id="selectedNodeBox"><strong>None</strong></div>

        <div class="muted" style="margin-top:12px;">Quick facts (placeholder)</div>
        <div style="margin-top:8px; opacity:.9; display:flex; flex-direction: column; gap:6px;">
          <div>• Tone: Nordic / cold</div>
          <div>• Scope: Kingdom-level</div>
          <div>• Focus: Worldbuilding + storyline spine</div>
        </div>
      </div>
      <div class="panelFoot">panel</div>
    </section>
  </main>

  <script src="../assets/js/core.js" defer></script>
  <script src="../assets/js/pages/novelcrafter.js" defer></script>
</body>
</html>
